{"version":3,"sources":["../js/game.jsx"],"names":["wrap","document","getElementById","login","getElementsByClassName","real","rank","credit","socket","renderBoard","props","value","style","display","io","emit","ReactDOM","render","alert","Reset","onClick","Pull","Give","Draw","Unit","OnlinePlayer","arr","key","online","push","map","index","hasOwnProperty","role","userName","Turn","result","turn","Board","React","Component","constructor","state","Array","fill","isBlacksTurn","point","urBlack","status","gaming","componentWillMount","that","on","msg","setState","console","log","user","componentDidMount","styleArray","styleArr","slice","place","handle","n","num","i","reset","pull","give","draw","componentDidUpdate","gamingUser","p1","p1Rank","p1Rep","p1Status","p1Win","p2","p2Rank","p2Rep","p2Status","p2Win","win","calculateWinner","submit","e","path","browserHistory","preventDefault","board","r","pullback","giveup","offerdraw","target","line","upSide","leftUp","rightUp","Math","min","floor","leftSide","rightSide","downSide","leftDown","rightDown"],"mappings":"AAAA,IAAIA,OAAKC,SAASC,cAAT,CAAwB,MAAxB,CAAT;AACA,IAAIC,QAAMF,SAASG,sBAAT,CAAgC,OAAhC,EAAyC,CAAzC,CAAV;AACA,IAAIC,OAAOJ,SAASC,cAAT,CAAwB,MAAxB,CAAX;AACA,IAAII,OAAOL,SAASC,cAAT,CAAwB,MAAxB,CAAX;AACA,IAAIK,SAASN,SAASC,cAAT,CAAwB,QAAxB,CAAb;AACA,IAAIM,MAAJ;;AAEA,SAASC,WAAT,CAAqBC,KAArB,EAA2B;AACzB,QAAGH,OAAOI,KAAP,IAAc,CAAjB,EAAmB;AACjBR,cAAMS,KAAN,CAAYC,OAAZ,GAAoB,MAApB;AACAb,aAAKY,KAAL,CAAWC,OAAX,GAAmB,OAAnB;AACAL,iBAAOM,IAAP;AACAN,eAAOO,IAAP,CAAY,OAAZ,EAAoB,EAAC,YAAWV,KAAKM,KAAjB,EAAuB,QAAOL,KAAKK,KAAnC,EAAyC,UAASJ,OAAOI,KAAzD,EAApB;AACAK,iBAASC,MAAT,CAAgB,oBAAC,KAAD,OAAhB,EACAhB,SAASC,cAAT,CAAwB,MAAxB,CADA;AAED,KAPD,MAQI;AACFgB,cAAM,uCAAN;AACD;AACF;AACD;AACA,SAASC,KAAT,CAAeT,KAAf,EAAqB;AAClB,WACG;AAAA;AAAA,UAAQ,SAAS,MAAMA,MAAMU,OAAN,EAAvB,EAAwC,WAAU,OAAlD;AAAA;AAAA,KADH;AAKF;;AAED;AACA,SAASC,IAAT,CAAcX,KAAd,EAAoB;AACjB,WACG;AAAA;AAAA,UAAQ,SAAS,MAAMA,MAAMU,OAAN,EAAvB,EAAwC,WAAU,MAAlD;AAAA;AAAA,KADH;AAKF;;AAED;AACA,SAASE,IAAT,CAAcZ,KAAd,EAAoB;AACjB,WACG;AAAA;AAAA,UAAQ,SAAS,MAAMA,MAAMU,OAAN,EAAvB,EAAwC,WAAU,MAAlD;AAAA;AAAA,KADH;AAKF;;AAED;AACA,SAASG,IAAT,CAAcb,KAAd,EAAoB;AACjB,WACG;AAAA;AAAA,UAAQ,SAAS,MAAMA,MAAMU,OAAN,EAAvB,EAAwC,WAAU,MAAlD;AAAA;AAAA,KADH;AAKF;;AAED,SAASI,IAAT,CAAcd,KAAd,EAAoB;AACjB,WACG,6BAAK,WAAWA,MAAME,KAAtB,EAA6B,SAAS,MAAMF,MAAMU,OAAN,EAA5C,GADH;AAGF;AACD;AACA,SAASK,YAAT,CAAsBf,KAAtB,EAA4B;AAC1B,QAAIgB,MAAI,EAAR;AACA,SAAI,IAAIC,GAAR,IAAejB,MAAMkB,MAArB,EAA4B;AACzBF,YAAIG,IAAJ,CAASnB,MAAMkB,MAAN,CAAaD,GAAb,CAAT;AACF;AACA,WACM;AAAA;AAAA,UAAK,WAAU,QAAf;AACMD,YAAII,GAAJ,CAAQ,UAASnB,KAAT,EAAeoB,KAAf,EAAqB;;AAExB,gBAAGpB,MAAMqB,cAAN,CAAqB,MAArB,KAAgCrB,MAAMsB,IAAzC,EAA8C;AACzC,uBAAO;AAAA;AAAA,sBAAK,KAAKF,KAAV,EAAiB,WAAU,UAA3B;AAEI,wCAAC,IAAD,IAAM,OAAM,aAAZ,GAFJ;AAGI;AAAA;AAAA,0BAAK,WAAU,IAAf;AAAqBpB,8BAAMuB,QAA3B;AAAA;AAA+CvB,8BAAML,IAArD;AAAA;AAAyEK,8BAAMJ,MAA/E;AAAA;AAAA;AAHJ,iBAAP;AAKJ,aAND,MAMM,IAAGI,MAAMqB,cAAN,CAAqB,MAArB,KAAgC,CAACrB,MAAMsB,IAA1C,EAA+C;AAChD,uBAAQ;AAAA;AAAA,sBAAK,KAAKF,KAAV,EAAiB,WAAU,UAA3B;AAEG,wCAAC,IAAD,IAAM,OAAM,aAAZ,GAFH;AAGG;AAAA;AAAA,0BAAK,WAAU,IAAf;AAAqBpB,8BAAMuB,QAA3B;AAAA;AAA+CvB,8BAAML,IAArD;AAAA;AAAyEK,8BAAMJ,MAA/E;AAAA;AAAA;AAHH,iBAAR;AAKJ,aANK,MAMD;AACA,uBAAQ;AAAA;AAAA,sBAAG,KAAKwB,KAAR;AAAgBpB,0BAAMuB,QAAtB;AAAA;AAAA,iBAAR;AACJ;AACN,SAjBA;AADN,KADN;AAuBF;AACD;AACA,SAASC,IAAT,CAAczB,KAAd,EAAoB;AAChB,QAAI0B,MAAJ;AACA,QAAG1B,MAAM2B,IAAT,EAAc;AACVD,iBAAO;AAAA;AAAA,cAAK,WAAU,MAAf;AAAsB;AAAA;AAAA;AAAA;AAAA;AAAtB,SAAP;AACH,KAFD,MAEK;AACDA,iBAAO;AAAA;AAAA,cAAK,WAAU,MAAf;AAAsB;AAAA;AAAA;AAAA;AAAA;AAAtB,SAAP;AACH;AACD,WACGA,MADH;AAGH;AACD;AACA,MAAME,KAAN,SAAoBC,MAAMC,SAA1B,CAAmC;AACjCC,kBAAc;AACZ;AACA,aAAKC,KAAL,GAAa;AACX,wBAAYC,MAAM,GAAN,EAAWC,IAAX,CAAgB,MAAhB,CADD;AAEXC,0BAAa,IAFF;AAGXC,mBAAM,CAAC,CAHI;AAIXC,qBAAQ,IAJG;AAKXC,oBAAO,CALI;AAMXpB,oBAAO,EANI;AAOXqB,oBAAO;AAPI,SAAb;AASD;AACDC,yBAAqB;AACnB,YAAIC,OAAO,IAAX;AACA3C,eAAO4C,EAAP,CAAU,MAAV,EAAkB,UAASC,GAAT,EAAa;AAC3B,gBAAGA,IAAIrB,cAAJ,CAAmB,MAAnB,KAA8BqB,IAAIpB,IAArC,EAA0C;AACrCkB,qBAAKG,QAAL,CAAc,EAACP,SAAS,IAAV,EAAd;AACAQ,wBAAQC,GAAR,CAAY,gBAAZ;AACJ,aAHD,MAGM,IAAGH,IAAIrB,cAAJ,CAAmB,MAAnB,KAA8B,CAACqB,IAAIpB,IAAtC,EAA2C;AAC7CkB,qBAAKG,QAAL,CAAc,EAACP,SAAS,KAAV,EAAd;AACAQ,wBAAQC,GAAR,CAAY,gBAAZ;AACH,aAHK,MAGD;AACAD,wBAAQC,GAAR,CAAY,mBAAZ;AACJ;AACJ,SAVD;AAWChD,eAAO4C,EAAP,CAAU,QAAV,EAAoB,UAASK,IAAT,EAAc;AAC9BN,iBAAKG,QAAL,CAAc,EAAC1B,QAAQ6B,IAAT,EAAd;AACJ,SAFA;AAGAjD,eAAO4C,EAAP,CAAU,QAAV,EAAmB,UAASK,IAAT,EAAc;AAC/BN,iBAAKG,QAAL,CAAc,EAACL,QAAQQ,IAAT,EAAd;AACD,SAFD;AAGF;AACDC,wBAAoB;AAClB,YAAIP,OAAO,IAAX;AACC3C,eAAO4C,EAAP,CAAU,cAAV,EAA0B,UAASC,GAAT,EAAa;AACtC;AACA,kBAAMM,aAAaR,KAAKT,KAAL,CAAWkB,QAAX,CAAoBC,KAApB,EAAnB;AACAF,uBAAWN,IAAIS,KAAf,IAAwBX,KAAKT,KAAL,CAAWG,YAAX,GAA0B,aAA1B,GAA0C,aAAlE;AACAM,iBAAKG,QAAL,CAAc;AACZ,4BAAWK,UADC;AAEXd,8BAAc,CAACM,KAAKT,KAAL,CAAWG,YAFf;AAGXC,uBAAMO,IAAIS;AAHC,aAAd;AAKD,SATA;AAUDtD,eAAO4C,EAAP,CAAU,OAAV,EAAkB,UAASC,GAAT,EAAa;AAC3BE,oBAAQC,GAAR,CAAY,OAAZ;AACA,kBAAMG,aAAaR,KAAKT,KAAL,CAAWkB,QAAX,CAAoBC,KAApB,EAAnB;AACAF,uBAAWf,IAAX,CAAgB,MAAhB;AACAO,iBAAKG,QAAL,CAAc;AACZ,4BAAWK,UADC;AAEXb,uBAAM,CAAC;AAFI,aAAd;AAIA9B,qBAASC,MAAT,CAAgB,gCAAhB,EAA4BhB,SAASC,cAAT,CAAwB,UAAxB,CAA5B;AACA,gBAAGmD,IAAIhB,IAAP,EAAY;AACVnB,sBAAM,qBAAN;AACD,aAFD,MAEK;AACHA,sBAAM,qBAAN;AACD;AACJ,SAdD;AAeD;;AAED6C,WAAOC,CAAP,EAAS;;AAEL;AACA;AACA;AACA;AACA,YAAIC,MAAI,CAAR;AACA,aAAI,IAAIC,CAAR,IAAa,KAAKxB,KAAL,CAAWd,MAAxB,EAA+B;AACzBqC;AACL;AACD,YAAGA,MAAI,CAAP,EAAS;AACP/C,kBAAM,wBAAN;AACA;AACD;AACD;AACA,YAAG,KAAKwB,KAAL,CAAWG,YAAX,IAAyB,KAAKH,KAAL,CAAWK,OAAvC,EAA+C;AAC3C,gBAAG,KAAKL,KAAL,CAAWkB,QAAX,CAAoBI,CAApB,KAAwB,MAA3B,EAAkC;AAAC;AACjC9C,sBAAM,wBAAN;AACA;AACH;AACDV,mBAAOO,IAAP,CAAY,cAAZ,EAA2B,EAAC,SAAQiD,CAAT,EAAW,UAAS,KAAKtB,KAAL,CAAWG,YAA/B,EAA3B;AACD,SAND,MAMK;AACD3B,kBAAM,sBAAN;AACH;AAEJ;AACDiD,YAAO;AACJ3D,eAAOO,IAAP,CAAY,OAAZ,EAAoB,EAAC,QAAO,KAAK2B,KAAL,CAAWG,YAAnB,EAApB;AACF;;AAEDuB,WAAM;AACJ5D,eAAOO,IAAP,CAAY,UAAZ,EAAuB,EAAvB;AACD;;AAEDsD,WAAM;AACJ7D,eAAOO,IAAP,CAAY,QAAZ,EAAqB,EAArB;AACD;;AAEDuD,WAAM;AACJ9D,eAAOO,IAAP,CAAY,WAAZ,EAAwB,EAAxB;AACD;;AAEDwD,yBAAoB;AACpB;AACA,YAAIC,aAAa,KAAK9B,KAAL,CAAWO,MAA5B;AACA,YAAIwB,KAAKpE,KAAKM,KAAd;AACA,YAAI+D,SAASpE,KAAKK,KAAlB;AACA,YAAIgE,QAAQpE,OAAOI,KAAnB;AACA,YAAI8D,EAAJ,EAAOC,MAAP,EAAcC,KAAd,EAAoBC,QAApB,EAA6BC,KAA7B;AACA,YAAIC,EAAJ,EAAOC,MAAP,EAAcC,KAAd,EAAoBC,QAApB,EAA6BC,KAA7B;;AAEA,aAAI,IAAIvD,GAAR,IAAe6C,UAAf,EAA0B;AACvB,gBAAGA,WAAW7C,GAAX,EAAgBO,QAAhB,IAA0BuC,EAA7B,EACA;AACEK,qBAAKN,WAAW7C,GAAX,EAAgBO,QAArB;AACA6C,yBAASP,WAAW7C,GAAX,EAAgBrB,IAAzB;AACA0E,wBAAQR,WAAW7C,GAAX,EAAgBpB,MAAxB;AACA0E,2BAAWT,WAAW7C,GAAX,EAAgBqB,MAA3B;AACAkC,wBAAQV,WAAW7C,GAAX,EAAgBwD,GAAxB;AACD,aAPD,MAOM;AACJP,2BAAWJ,WAAW7C,GAAX,EAAgBqB,MAA3B;AACA6B,wBAAQL,WAAW7C,GAAX,EAAgBwD,GAAxB;AACD;AACH;AACI,YAAGC,gBAAgB,KAAK1C,KAAL,CAAWkB,QAA3B,EAAoC,KAAKlB,KAAL,CAAWI,KAA/C,CAAH,EAAyD;AACpD,gBAAG,KAAKJ,KAAL,CAAWG,YAAX,IAAyB,KAAKH,KAAL,CAAWK,OAApC,IAA6C,KAAKL,KAAL,CAAWK,OAAX,IAAoB,IAApE,EAAyE;AACvE/B,yBAASC,MAAT,CAAgB,6BAAK,KAAI,iBAAT,EAA2B,WAAU,SAArC,GAAhB,EAAiEhB,SAASC,cAAT,CAAwB,UAAxB,CAAjE;AACCM,uBAAOO,IAAP,CAAY,SAAZ,EAAsB,EAACmB,UAAS7B,KAAKM,KAAf,EAAtB;AACAiE,2BAAWK,WAAW,CAAtB;AACAJ,wBAAQ,SAAR,CAAmBK,QAAQ,QAAR;AACnBlE,yBAASC,MAAT,CACA;AAAA;AAAA,sBAAM,QAAO,SAAb,EAAuB,QAAO,MAA9B,EAAqC,UAAU,KAAKoE,MAApD;AACC;AAAA;AAAA;AACC;AAAA;AAAA;AACA;AAAA;AAAA;AACC;AAAA;AAAA;AAAI,mEAAO,MAAK,MAAZ,EAAmB,IAAG,IAAtB,EAA2B,MAAK,IAAhC,EAAqC,cAAcZ,EAAnD;AAAJ,iCADD;AAEC;AAAA;AAAA;AAAI,mEAAO,MAAK,MAAZ,EAAmB,IAAG,QAAtB,EAA+B,MAAK,QAApC,EAA6C,cAAcC,MAA3D;AAAJ,iCAFD;AAGC;AAAA;AAAA;AAAI,mEAAO,MAAK,MAAZ,EAAmB,IAAG,OAAtB,EAA8B,MAAK,OAAnC,EAA2C,cAAcC,KAAzD;AAAJ,iCAHD;AAIC;AAAA;AAAA;AAAI,mEAAO,MAAK,MAAZ,EAAmB,IAAG,UAAtB,EAAiC,MAAK,UAAtC,EAAiD,cAAcC,QAA/D;AAAJ,iCAJD;AAKC;AAAA;AAAA;AAAI,mEAAO,MAAK,MAAZ,EAAmB,IAAG,OAAtB,EAA8B,MAAK,OAAnC,EAA2C,cAAcC,KAAzD;AAAJ;AALD,6BADA;AAQA;AAAA;AAAA;AACC;AAAA;AAAA;AAAI,mEAAO,MAAK,MAAZ,EAAmB,IAAG,IAAtB,EAA2B,MAAK,IAAhC,EAAqC,cAAcC,EAAnD;AAAJ,iCADD;AAEC;AAAA;AAAA;AAAI,mEAAO,MAAK,MAAZ,EAAmB,IAAG,QAAtB,EAA+B,MAAK,QAApC,EAA6C,cAAcC,MAA3D;AAAJ,iCAFD;AAGC;AAAA;AAAA;AAAI,mEAAO,MAAK,MAAZ,EAAmB,IAAG,OAAtB,EAA8B,MAAK,OAAnC,EAA2C,cAAcC,KAAzD;AAAJ,iCAHD;AAIC;AAAA;AAAA;AAAI,mEAAO,MAAK,MAAZ,EAAmB,IAAG,UAAtB,EAAiC,MAAK,UAAtC,EAAiD,cAAcC,QAA/D;AAAJ,iCAJD;AAKC;AAAA;AAAA;AAAI,mEAAO,MAAK,MAAZ,EAAmB,IAAG,OAAtB,EAA8B,MAAK,OAAnC,EAA2C,cAAcC,KAAzD;AAAJ;AALD,6BARA;AAeA;AAAA;AAAA;AACC;AAAA;AAAA;AAAI,mEAAO,MAAK,QAAZ,EAAqB,OAAM,MAA3B;AAAJ;AADD;AAfA;AADD;AADD,iBADA,EAwBAjF,SAASC,cAAT,CAAwB,QAAxB,CAxBA;AAyBF,aA9BD,MA8BK;AACHc,yBAASC,MAAT,CAAgB,6BAAK,KAAI,gBAAT,EAA0B,WAAU,SAApC,GAAhB,EAAgEhB,SAASC,cAAT,CAAwB,UAAxB,CAAhE;AACAM,uBAAOO,IAAP,CAAY,QAAZ,EAAqB,EAACmB,UAAS7B,KAAKM,KAAf,EAArB;AACAiE,2BAAWK,WAAW,CAAtB;AACAJ,wBAAQ,QAAR,CAAkBK,QAAQ,SAAR;AAClBlE,yBAASC,MAAT,CACA;AAAA;AAAA,sBAAM,QAAO,SAAb,EAAuB,QAAO,MAA9B,EAAqC,UAAU,KAAKoE,MAApD;AACC;AAAA;AAAA;AACC;AAAA;AAAA;AACA;AAAA;AAAA;AACC;AAAA;AAAA;AAAI,mEAAO,MAAK,MAAZ,EAAmB,IAAG,IAAtB,EAA2B,MAAK,IAAhC,EAAqC,cAAcZ,EAAnD;AAAJ,iCADD;AAEC;AAAA;AAAA;AAAI,mEAAO,MAAK,MAAZ,EAAmB,IAAG,QAAtB,EAA+B,MAAK,QAApC,EAA6C,cAAcC,MAA3D;AAAJ,iCAFD;AAGC;AAAA;AAAA;AAAI,mEAAO,MAAK,MAAZ,EAAmB,IAAG,OAAtB,EAA8B,MAAK,OAAnC,EAA2C,cAAcC,KAAzD;AAAJ,iCAHD;AAIC;AAAA;AAAA;AAAI,mEAAO,MAAK,MAAZ,EAAmB,IAAG,UAAtB,EAAiC,MAAK,UAAtC,EAAiD,cAAcC,QAA/D;AAAJ,iCAJD;AAKC;AAAA;AAAA;AAAI,mEAAO,MAAK,MAAZ,EAAmB,IAAG,OAAtB,EAA8B,MAAK,OAAnC,EAA2C,cAAcC,KAAzD;AAAJ;AALD,6BADA;AAQA;AAAA;AAAA;AACC;AAAA;AAAA;AAAI,mEAAO,MAAK,MAAZ,EAAmB,IAAG,IAAtB,EAA2B,MAAK,IAAhC,EAAqC,cAAcC,EAAnD;AAAJ,iCADD;AAEC;AAAA;AAAA;AAAI,mEAAO,MAAK,MAAZ,EAAmB,IAAG,QAAtB,EAA+B,MAAK,QAApC,EAA6C,cAAcC,MAA3D;AAAJ,iCAFD;AAGC;AAAA;AAAA;AAAI,mEAAO,MAAK,MAAZ,EAAmB,IAAG,OAAtB,EAA8B,MAAK,OAAnC,EAA2C,cAAcC,KAAzD;AAAJ,iCAHD;AAIC;AAAA;AAAA;AAAI,mEAAO,MAAK,MAAZ,EAAmB,IAAG,UAAtB,EAAiC,MAAK,UAAtC,EAAiD,cAAcC,QAA/D;AAAJ,iCAJD;AAKC;AAAA;AAAA;AAAI,mEAAO,MAAK,MAAZ,EAAmB,IAAG,OAAtB,EAA8B,MAAK,OAAnC,EAA2C,cAAcC,KAAzD;AAAJ;AALD,6BARA;AAeA;AAAA;AAAA;AACC;AAAA;AAAA;AAAI,mEAAO,MAAK,QAAZ,EAAqB,OAAM,MAA3B;AAAJ;AADD;AAfA;AADD;AADD,iBADA,EAwBAjF,SAASC,cAAT,CAAwB,QAAxB,CAxBA;AAyBD;AACN;AACJ;;AAEDmF,WAAOC,CAAP,EAAS;AACP/B,gBAAQC,GAAR,CAAY,eAAZ;AACA,cAAM+B,OAAK,SAAX;AACAC,uBAAe3D,IAAf,CAAoB0D,IAApB;AACAD,UAAEG,cAAF;AACD;;AAEDxE,aAAQ;;AAEJ,YAAIyE,QAAM,EAAV;AACA,aAAI,IAAIC,IAAE,CAAV,EAAYA,IAAE,EAAd,EAAiBA,GAAjB,EAAqB;AACnB,iBAAI,IAAIzB,IAAE,CAAV,EAAYA,IAAE,EAAd,EAAiBA,GAAjB,EAAqB;AACnBwB,sBAAMC,IAAE,EAAF,GAAKzB,CAAX,IAAc,oBAAC,IAAD,IAAM,KAAK,CAACyB,CAAD,EAAGzB,CAAH,CAAX,EAAkB,OAAO,KAAKxB,KAAL,CAAWkB,QAAX,CAAoB+B,IAAE,EAAF,GAAKzB,CAAzB,CAAzB,EAAsD,SAAS,MAAM,KAAKH,MAAL,CAAY4B,IAAE,EAAF,GAAKzB,CAAjB,CAArE,GAAd;AACD;AACF;AACD,eACE;AAAA;AAAA;AACE,gCAAC,YAAD,IAAc,QAAQ,KAAKxB,KAAL,CAAWd,MAAjC,GADF;AAEG8D,iBAFH;AAGE,gCAAC,IAAD,IAAM,MAAM,KAAKhD,KAAL,CAAWG,YAAvB,GAHF;AAIE,gCAAC,KAAD,IAAO,SAAS,MAAM,KAAKsB,KAAL,EAAtB,GAJF;AAKE,gCAAC,IAAD,IAAM,SAAS,MAAM,KAAKyB,QAAL,EAArB,GALF;AAME,gCAAC,IAAD,IAAM,SAAS,MAAM,KAAKC,MAAL,EAArB,GANF;AAOE,gCAAC,IAAD,IAAM,SAAS,MAAM,KAAKC,SAAL,EAArB,GAPF;AAQE,yCAAK,IAAG,UAAR,GARF;AASE,yCAAK,IAAG,QAAR;AATF,SADF;AAaD;AA3N8B;;AA8NnC,SAASV,eAAT,CAAyB1D,GAAzB,EAA6BuC,GAA7B,EAAkC;AAC9B,QAAI8B,SAAOrE,IAAIuC,GAAJ,CAAX;AACA,QAAI+B,OAAK,CAAT;AACA,QAAIC,MAAJ,EAAWC,MAAX,EAAkBC,OAAlB;AACAF,aAAOC,SAAOC,UAAQC,KAAKC,GAAL,CAASD,KAAKE,KAAL,CAAWrC,MAAI,EAAf,CAAT,EAA4B,CAA5B,CAAtB;AACA;AACA,QAAIsC,WAASH,KAAKC,GAAL,CAASpC,MAAI,EAAb,EAAgB,CAAhB,CAAb;AACA,QAAIuC,YAAUJ,KAAKC,GAAL,CAAS,KAAGpC,MAAI,EAAhB,EAAmB,CAAnB,CAAd;AACA;AACA,SAAI,IAAIC,IAAED,MAAI,CAAd,EAAgBC,IAAED,MAAIsC,QAAJ,GAAa,CAA/B,EAAiCrC,GAAjC,EAAqC;AACjC,YAAGxC,IAAIwC,CAAJ,KAAQ6B,MAAX,EAAkB;AACdC;AACH,SAFD,MAEK;AACF;AACF;AACJ;AACD,SAAI,IAAI9B,IAAED,MAAI,CAAd,EAAgBC,KAAGD,MAAIuC,SAAvB,EAAiCtC,GAAjC,EAAqC;AACjC,YAAGxC,IAAIwC,CAAJ,KAAQ6B,MAAX,EAAkB;AACdC;AACH,SAFD,MAEK;AACD;AACH;AACJ;AACD,QAAGA,QAAM,CAAT,EAAW;AACP,eAAO,IAAP;AACH,KAFD,MAEK;AACDA,eAAK,CAAL;AACH;AACD;AACA,SAAI,IAAI9B,IAAED,MAAI,EAAd,EAAiBC,KAAGD,MAAIgC,SAAO,EAA/B,EAAkC/B,IAAEA,IAAE,EAAtC,EAAyC;AACrC,YAAGxC,IAAIwC,CAAJ,KAAQ6B,MAAX,EAAkB;AACdC;AACH,SAFD,MAEK;AACD;AACH;AACJ;AACD,QAAIS,WAAS,KAAGR,MAAhB;AACA,SAAI,IAAI/B,IAAED,MAAI,EAAd,EAAiBC,KAAGD,MAAIwC,WAAS,EAAjC,EAAoCvC,IAAEA,IAAE,EAAxC,EAA2C;AACvC,YAAGxC,IAAIwC,CAAJ,KAAQ6B,MAAX,EAAkB;AACdC;AACH,SAFD,MAEK;AACD;AACH;AACJ;AACD,QAAGA,QAAM,CAAT,EAAW;AACR,eAAO,IAAP;AACF,KAFD,MAEK;AACDA,eAAK,CAAL;AACH;AACD;;AAEAG,cAAQC,KAAKC,GAAL,CAASF,OAAT,EAAiBK,SAAjB,CAAR,CAnD8B,CAmDK;AACnC,SAAI,IAAItC,IAAED,MAAI,EAAd,EAAiBC,KAAGD,MAAIkC,UAAQ,EAAhC,EAAmCjC,IAAEA,IAAE,EAAvC,EAA0C;AACtC,YAAGxC,IAAIwC,CAAJ,KAAQ6B,MAAX,EAAkB;AACdC;AACH,SAFD,MAEK;AACD;AACH;AACJ;AACD,QAAIU,QAAJ,EAAaC,SAAb;AACAA,gBAAUD,WAAS,KAAGN,KAAKE,KAAL,CAAWrC,MAAI,EAAf,CAAtB;AACAyC,eAASN,KAAKC,GAAL,CAASK,QAAT,EAAkBH,QAAlB,CAAT,CA7D8B,CA6DO;AACrC,SAAI,IAAIrC,IAAED,MAAI,EAAd,EAAiBC,KAAGD,MAAIyC,WAAS,EAAjC,EAAoCxC,IAAEA,IAAE,EAAxC,EAA2C;AACvC,YAAGxC,IAAIwC,CAAJ,KAAQ6B,MAAX,EAAkB;AACdC;AACH,SAFD,MAEK;AACD;AACH;AACJ;AACD,QAAGA,QAAM,CAAT,EAAW;AACR,eAAO,IAAP;AACF,KAFD,MAEK;AACDA,eAAK,CAAL;AACH;AACD;AACAG,cAAQC,KAAKC,GAAL,CAASF,OAAT,EAAiBI,QAAjB,CAAR;AACA,SAAI,IAAIrC,IAAED,MAAI,EAAd,EAAiBC,KAAGD,MAAIkC,UAAQ,EAAhC,EAAmCjC,IAAEA,IAAE,EAAvC,EAA0C;AACtC,YAAGxC,IAAIwC,CAAJ,KAAQ6B,MAAX,EAAkB;AACdC;AACH,SAFD,MAEK;AACD;AACH;AACJ;AACDW,gBAAUP,KAAKC,GAAL,CAASM,SAAT,EAAmBH,SAAnB,CAAV;AACA,SAAI,IAAItC,IAAED,MAAI,EAAd,EAAiBC,KAAGD,MAAI0C,YAAU,EAAlC,EAAqCzC,IAAEA,IAAE,EAAzC,EAA4C;AACxC,YAAGxC,IAAIwC,CAAJ,KAAQ6B,MAAX,EAAkB;AACdC;AACH,SAFD,MAEK;AACD;AACH;AACJ;AACD,QAAGA,QAAM,CAAT,EAAW;AACR,eAAO,IAAP;AACF,KAFD,MAEK;AACDA,eAAK,CAAL;AACH;;AAED,WAAO,KAAP;AACH","file":"game.js","sourcesContent":["var wrap=document.getElementById('wrap');\nvar login=document.getElementsByClassName('login')[0];\nvar real = document.getElementById('user');\nvar rank = document.getElementById('rank');\nvar credit = document.getElementById('credit');\nvar socket;\n\nfunction renderBoard(props){\n  if(credit.value>=0){\n    login.style.display='none';\n    wrap.style.display='block';\n    socket=io();\n    socket.emit('login',{'userName':real.value,'rank':rank.value,'credit':credit.value});\n    ReactDOM.render(<Board />,\n    document.getElementById('wrap'))\n  }\n  else{\n    alert('Low reputation credits. Game Blocked.');\n  }\n}\n//Restart Button\nfunction Reset(props){\n   return(\n      <button onClick={() => props.onClick()} className='reset'>\n         Restart\n      </button>\n   )\n}\n\n//Pull Back\nfunction Pull(props){\n   return(\n      <button onClick={() => props.onClick()} className='pull'>\n         Pull Back\n      </button>\n   )\n}\n\n//Give up match\nfunction Give(props){\n   return(\n      <button onClick={() => props.onClick()} className='give'>\n         Give Up\n      </button>\n   )\n}\n\n// Draw offer\nfunction Draw(props){\n   return(\n      <button onClick={() => props.onClick()} className='draw'>\n         Offer Draw\n      </button>\n   )\n}\n\nfunction Unit(props){\n   return(\n      <div className={props.style} onClick={() => props.onClick()}></div>\n   )\n}\n//Online Player Numbers\nfunction OnlinePlayer(props){\n  let arr=[];\n  for(let key in props.online){\n     arr.push(props.online[key]);\n  }\n   return(\n         <div className='online'>\n              {arr.map(function(value,index){\n\n                    if(value.hasOwnProperty('role') && value.role){\n                         return <div key={index} className='clearfix'>\n\n                                    <Unit style='unit unit-b' />\n                                    <div className='fl'>{value.userName}   [Rank: {value.rank}, Reputation: {value.credit}]</div>\n                                </div>\n                    }else if(value.hasOwnProperty('role') && !value.role){\n                         return  <div key={index} className='clearfix'>\n\n                                    <Unit style='unit unit-w' />\n                                    <div className='fl'>{value.userName}   [Rank: {value.rank}, Reputation: {value.credit}]</div>\n                                </div>\n                    }else{\n                         return  <p key={index}>{value.userName} : is observing.</p>\n                    }\n              })\n           }\n        </div>\n    )\n}\n//玩家切换\nfunction Turn(props){\n    var result;\n    if(props.turn){\n        result=<div className='turn'><strong>BLACK</strong></div>\n    }else{\n        result=<div className='turn'><strong>WHITE</strong></div>\n    }\n    return(\n       result\n    )\n}\n//主棋盘\nclass Board extends React.Component{\n  constructor() {\n    super();\n    this.state = {\n      'styleArr': Array(225).fill('unit'),\n      isBlacksTurn:true,\n      point:-1,\n      urBlack:null,\n      status:0,\n      online:{},\n      gaming:{}\n    };\n  }\n  componentWillMount() {\n    var that = this;\n    socket.on('role', function(msg){\n        if(msg.hasOwnProperty('role') && msg.role){\n             that.setState({urBlack: true,})\n             console.log('You are Black.')\n        }else if(msg.hasOwnProperty('role') && !msg.role){\n            that.setState({urBlack: false,})\n            console.log('You are white.')\n        }else{\n             console.log('Chess Board Busy.')\n        }\n    })\n     socket.on('online', function(user){\n         that.setState({online: user});\n    })\n     socket.on('gaming',function(user){\n       that.setState({gaming: user});\n     })\n  }\n  componentDidMount() {\n    var that = this;\n     socket.on('chat message', function(msg){\n      //更新视图\n      const styleArray = that.state.styleArr.slice();\n      styleArray[msg.place] = that.state.isBlacksTurn ? 'unit unit-b' : 'unit unit-w';\n      that.setState({\n        'styleArr':styleArray,\n         isBlacksTurn: !that.state.isBlacksTurn,\n         point:msg.place,\n         })\n    });\n    socket.on('reset',function(msg){\n        console.log('reset')\n        const styleArray = that.state.styleArr.slice();\n        styleArray.fill('unit')\n        that.setState({\n          'styleArr':styleArray,\n           point:-1,\n           });\n        ReactDOM.render(<div></div>,document.getElementById('gameover'));\n        if(msg.turn){\n          alert(\"Black starts first.\")\n        }else{\n          alert(\"White starts first.\")\n        }\n    });\n  }\n\n  handle(n){\n\n      //刚落子的加个css3特效\n      //\n      //\n      //\n      let num=0;\n      for(let i in this.state.online){\n            num++;\n      }\n      if(num<2){\n        alert('Waiting for a partner.')\n        return\n      }\n      //判断该谁落子\n      if(this.state.isBlacksTurn==this.state.urBlack){\n          if(this.state.styleArr[n]!='unit'){//如果落子的地方有子\n            alert('The place is occupied.');\n            return;\n        }\n        socket.emit('chat message',{'place':n,'player':this.state.isBlacksTurn})\n      }else{\n          alert('It is not your turn.');\n      }\n\n  }\n  reset(){\n     socket.emit('reset',{\"turn\":this.state.isBlacksTurn})\n  }\n\n  pull(){\n    socket.emit('pullback',{})\n  }\n\n  give(){\n    socket.emit('giveup',{})\n  }\n\n  draw(){\n    socket.emit('offerdraw',{})\n  }\n\n  componentDidUpdate(){\n  // 更新的时候触发\n  var gamingUser = this.state.gaming;\n  var p1 = real.value;\n  var p1Rank = rank.value;\n  var p1Rep = credit.value;\n  var p1,p1Rank,p1Rep,p1Status,p1Win;\n  var p2,p2Rank,p2Rep,p2Status,p2Win;\n\n  for(let key in gamingUser){\n     if(gamingUser[key].userName!=p1)\n     {\n       p2 = gamingUser[key].userName;\n       p2Rank = gamingUser[key].rank;\n       p2Rep = gamingUser[key].credit;\n       p2Status = gamingUser[key].status;\n       p2Win = gamingUser[key].win;\n     }else {\n       p1Status = gamingUser[key].status;\n       p1Win = gamingUser[key].win;\n     }\n  }\n       if(calculateWinner(this.state.styleArr,this.state.point)){\n            if(this.state.isBlacksTurn!=this.state.urBlack&&this.state.urBlack!=null){\n              ReactDOM.render(<img src='img/victory.png' className='victory'/>,document.getElementById('gameover'));\n               socket.emit('victory',{userName:real.value});\n               p1Status = p2Status = 1;\n               p1Win = 'victory'; p2Win = 'defeat';\n               ReactDOM.render(\n               <form action='/result' method='post' onSubmit={this.submit}>\n                <table>\n                 <tbody>\n                 <tr>\n                  <td><input type='text' id='p1' name='p1' defaultValue={p1} /></td>\n                  <td><input type='text' id='p1Rank' name='p1Rank' defaultValue={p1Rank} /></td>\n                  <td><input type='text' id='p1Rep' name='p1Rep' defaultValue={p1Rep} /></td>\n                  <td><input type='text' id='p1Status' name='p1Status' defaultValue={p1Status} /></td>\n                  <td><input type='text' id='p1Win' name='p1Win' defaultValue={p1Win} /></td>\n                 </tr>\n                 <tr>\n                  <td><input type='text' id='p2' name='p2' defaultValue={p2} /></td>\n                  <td><input type='text' id='p2Rank' name='p2Rank' defaultValue={p2Rank} /></td>\n                  <td><input type='text' id='p2Rep' name='p2Rep' defaultValue={p2Rep} /></td>\n                  <td><input type='text' id='p2Status' name='p2Status' defaultValue={p2Status} /></td>\n                  <td><input type='text' id='p2Win' name='p2Win' defaultValue={p2Win} /></td>\n                 </tr>\n                 <tr>\n                  <td><input type='submit' value='Quit' /></td>\n                 </tr>\n                 </tbody>\n               </table>\n               </form>,\n               document.getElementById('result'));\n            }else{\n              ReactDOM.render(<img src='img/defeat.png' className='victory'/>,document.getElementById('gameover'));\n              socket.emit('defeat',{userName:real.value});\n              p1Status = p2Status = 1;\n              p1Win = 'defeat'; p2Win = 'victory';\n              ReactDOM.render(\n              <form action='/result' method='post' onSubmit={this.submit}>\n               <table>\n                <tbody>\n                <tr>\n                 <td><input type='text' id='p1' name='p1' defaultValue={p1} /></td>\n                 <td><input type='text' id='p1Rank' name='p1Rank' defaultValue={p1Rank} /></td>\n                 <td><input type='text' id='p1Rep' name='p1Rep' defaultValue={p1Rep} /></td>\n                 <td><input type='text' id='p1Status' name='p1Status' defaultValue={p1Status} /></td>\n                 <td><input type='text' id='p1Win' name='p1Win' defaultValue={p1Win} /></td>\n                </tr>\n                <tr>\n                 <td><input type='text' id='p2' name='p2' defaultValue={p2} /></td>\n                 <td><input type='text' id='p2Rank' name='p2Rank' defaultValue={p2Rank} /></td>\n                 <td><input type='text' id='p2Rep' name='p2Rep' defaultValue={p2Rep} /></td>\n                 <td><input type='text' id='p2Status' name='p2Status' defaultValue={p2Status} /></td>\n                 <td><input type='text' id='p2Win' name='p2Win' defaultValue={p2Win} /></td>\n                </tr>\n                <tr>\n                 <td><input type='submit' value='Quit' /></td>\n                </tr>\n                </tbody>\n              </table>\n              </form>,\n              document.getElementById('result'));\n            }\n      }\n  }\n\n  submit(e){\n    console.log('Submit Result');\n    const path='/result';\n    browserHistory.push(path);\n    e.preventDefault();\n  }\n\n  render(){\n\n      let board=[];\n      for(let r=0;r<15;r++){\n        for(let i=0;i<15;i++){\n          board[r*15+i]=<Unit key={[r,i]} style={this.state.styleArr[r*15+i]} onClick={() => this.handle(r*15+i)}/>\n        }\n      }\n      return(\n        <div>\n          <OnlinePlayer online={this.state.online} />\n          {board}\n          <Turn turn={this.state.isBlacksTurn}/>\n          <Reset onClick={() => this.reset()} />\n          <Pull onClick={() => this.pullback()} />\n          <Give onClick={() => this.giveup()} />\n          <Draw onClick={() => this.offerdraw()} />\n          <div id='gameover'></div>\n          <div id='result'></div>\n      </div>\n      )\n    }\n}\n\nfunction calculateWinner(arr,num) {\n    var target=arr[num];\n    var line=1;\n    var upSide,leftUp,rightUp;\n    upSide=leftUp=rightUp=Math.min(Math.floor(num/15),5);\n    //横向判断先向左后向右\n    var leftSide=Math.min(num%15,5);\n    var rightSide=Math.min(14-num%15,5);\n    //console.log('rightSide',rightSide)\n    for(let i=num-1;i>num-leftSide-1;i--){\n        if(arr[i]==target){\n            line++;\n        }else{\n           break;\n        }\n    }\n    for(let i=num+1;i<=num+rightSide;i++){\n        if(arr[i]==target){\n            line++;\n        }else{\n            break;\n        }\n    }\n    if(line==5){\n        return true;\n    }else{\n        line=1;\n    }\n    //竖向判断 先上后下\n    for(let i=num-15;i>=num-upSide*15;i=i-15){\n        if(arr[i]==target){\n            line++;\n        }else{\n            break;\n        }\n    }\n    var downSide=15-upSide\n    for(let i=num+15;i<=num+downSide*15;i=i+15){\n        if(arr[i]==target){\n            line++;\n        }else{\n            break;\n        }\n    }\n    if(line==5){\n       return true;\n    }else{\n        line=1;\n    }\n    //   斜向判断  酱紫/斜   先上后下\n\n    rightUp=Math.min(rightUp,rightSide)//判断太靠右边了，就被右边界隔断\n    for(let i=num-14;i>=num-rightUp*14;i=i-14){\n        if(arr[i]==target){\n            line++;\n        }else{\n            break;\n        }\n    }\n    var leftDown,rightDown;\n    rightDown=leftDown=14-Math.floor(num/15);\n    leftDown=Math.min(leftDown,leftSide);//判断太靠左边了，就被左边界隔断\n    for(let i=num+14;i<=num+leftDown*14;i=i+14){\n        if(arr[i]==target){\n            line++;\n        }else{\n            break;\n        }\n    }\n    if(line==5){\n       return true;\n    }else{\n        line=1;\n    }\n    //   斜向判断   酱紫\\斜   先上后下\n    rightUp=Math.min(rightUp,leftSide)\n    for(let i=num-16;i>=num-rightUp*16;i=i-16){\n        if(arr[i]==target){\n            line++;\n        }else{\n            break;\n        }\n    }\n    rightDown=Math.min(rightDown,rightSide)\n    for(let i=num+16;i<=num+rightDown*16;i=i+16){\n        if(arr[i]==target){\n            line++;\n        }else{\n            break;\n        }\n    }\n    if(line==5){\n       return true;\n    }else{\n        line=1;\n    }\n\n    return false;\n}\n"]}