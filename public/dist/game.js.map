{"version":3,"sources":["../js/game.jsx"],"names":["wrap","document","getElementById","login","getElementsByClassName","real","rank","credit","quit","socket","pull_no","renderBoard","props","value","style","display","io","emit","ReactDOM","render","alert","Quit","onClick","Pull","Give","Draw","Unit","OnlinePlayer","arr","key","online","push","map","index","hasOwnProperty","role","userName","Turn","result","turn","Board","React","Component","constructor","state","Array","fill","isBlacksTurn","point","last","urBlack","status","giveup","draw","gaming","componentWillMount","that","on","msg","setState","console","log","user","componentDidMount","last_point","styleArray","styleArr","slice","place","obj","window","location","confirm","styles","color","handle","n","num","i","pull","give","componentDidUpdate","gamingUser","drawUser","p1","p1Rank","p1Rep","p1Quit","p1Status","p1Win","p2","p2Rank","p2Rep","p2Quit","p2Status","p2Win","win","submit","calculateWinner","e","path","browserHistory","preventDefault","board","r","target","line","upSide","leftUp","rightUp","Math","min","floor","leftSide","rightSide","downSide","leftDown","rightDown"],"mappings":"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","file":"game.js","sourcesContent":["var wrap=document.getElementById('wrap');\nvar login=document.getElementsByClassName('login')[0];\nvar real = document.getElementById('user');\nvar rank = document.getElementById('rank');\nvar credit = document.getElementById('credit');\nvar quit = document.getElementById('quit');\nvar socket;\nvar pull_no = 2;\n\nfunction renderBoard(props){\n  if(credit.value>=0){\n    login.style.display='none';\n    wrap.style.display='block';\n    socket=io();\n    socket.emit('login',{'userName':real.value,'rank':rank.value,'credit':credit.value,'quit':quit.value});\n    ReactDOM.render(<Board />,\n    document.getElementById('wrap'))\n  }\n  else{\n    alert('Game Blocked. Email to <yekang.gong@durham.ac.uk> for recovery.');\n  }\n}\n\n//Quit Button\nfunction Quit(props){\n   return(\n      <button onClick={() => props.onClick()} className='quit'>\n         Quit\n      </button>\n   )\n}\n\n//Pull Back\nfunction Pull(props){\n   return(\n      <button onClick={() => props.onClick()} className='pull'>\n         Pull Back\n      </button>\n   )\n}\n\n//Give up match\nfunction Give(props){\n   return(\n      <button onClick={() => props.onClick()} className='give'>\n         Give Up\n      </button>\n   )\n}\n\n// Draw offer\nfunction Draw(props){\n   return(\n      <button onClick={() => props.onClick()} className='draw'>\n         Offer Draw\n      </button>\n   )\n}\n\nfunction Unit(props){\n   return(\n      <div className={props.style} onClick={() => props.onClick()}></div>\n   )\n}\n\n//Online Player Numbers\nfunction OnlinePlayer(props){\n  let arr=[];\n  for(let key in props.online){\n     arr.push(props.online[key]);\n  }\n   return(\n         <div className='online'>\n              {arr.map(function(value,index){\n                    if(value.hasOwnProperty('role') && value.role){\n                         return <div key={index} className='clearfix'>\n                                    <Unit style='unit unit-b' />\n                                    <div className='fl'>{value.userName}   [Rank: {value.rank}, Reputation: {value.credit}, Quit: {value.quit}]</div>\n                                </div>\n                    }else if(value.hasOwnProperty('role') && !value.role){\n                         return  <div key={index} className='clearfix'>\n                                    <Unit style='unit unit-w' />\n                                    <div className='fl'>{value.userName}   [Rank: {value.rank}, Reputation: {value.credit}, Quit: {value.quit}]</div>\n                                </div>\n                    }else{\n                         return  <p key={index}>{value.userName} : is observing.</p>\n                    }\n              })\n           }\n        </div>\n    )\n}\n\n//Players Turn\nfunction Turn(props){\n    var result;\n    if(props.turn){\n        result=<div className='turn'><strong>BLACK</strong></div>\n    }else{\n        result=<div className='turn'><strong>WHITE</strong></div>\n    }\n    return(\n       result\n    )\n}\n\n//Main Board\nclass Board extends React.Component{\n  constructor() {\n    super();\n    this.state = {\n      'styleArr': Array(225).fill('unit'),\n      isBlacksTurn:true,\n      point:-1,\n      last:null,\n      urBlack:null,\n      status:-1,\n      giveup:null,\n      quit:null,\n      draw:{},\n      online:{},\n      gaming:{}\n    };\n  }\n  componentWillMount() {\n    var that = this;\n    socket.on('role', function(msg){\n        if(msg.hasOwnProperty('role') && msg.role){\n             that.setState({urBlack: true,})\n             console.log('You are Black.')\n        }else if(msg.hasOwnProperty('role') && !msg.role){\n            that.setState({urBlack: false,})\n            console.log('You are white.')\n        }else{\n             console.log('Chess Board Busy.')\n        }\n    })\n     socket.on('online', function(user){\n         that.setState({online: user});\n    })\n     socket.on('gaming',function(user){\n       that.setState({gaming: user});\n     })\n  }\n  componentDidMount() {\n    var that = this;\n    var last_point;\n\n     socket.on('chat message', function(msg){\n      const styleArray = that.state.styleArr.slice();\n      styleArray[msg.place] = that.state.isBlacksTurn ? 'unit unit-b' : 'unit unit-w';\n      if(that.state.point==-1){\n        that.setState({\n          'styleArr':styleArray,\n           isBlacksTurn: !that.state.isBlacksTurn,\n           point:msg.place,\n           status:0\n           })\n        last_point = msg.place;\n      }else {\n        that.setState({\n          'styleArr':styleArray,\n           isBlacksTurn: !that.state.isBlacksTurn,\n           point:msg.place,\n           last:last_point\n           })\n      }\n    });\n    socket.on('quit',function(obj){\n      if(obj.status==-1 || obj.status==1){\n        alert('You are directing to index.');\n        window.location='/index';\n        console.log(obj.userName +' quit the game.');\n      }else{\n       if(obj.userName==real.value){\n        let result = window.confirm('You are still in game. Leave will lose reputation scores.');\n        if(result){\n          alert('Submit result to quit');\n          console.log('quit');\n          that.setState({\n             quit:obj.userName\n             });\n          }\n        }else{\n          alert('Opponent desired to quit');\n          that.setState({\n             quit:obj.userName\n             });\n        }\n      }\n    });\n    socket.on('give up',function(obj){\n        console.log(obj.userName+' give up')\n        that.setState({\n          status:1,\n          giveup:obj.userName\n        });\n    });\n    socket.on('offer draw',function(obj){\n\t  let styles = {\n\t\tcolor:'red'\n\t  };\n    if(obj.userName!=real.value)\n    {\n     alert(obj.userName + ' wants to offer draw.')\n    }\n\t  ReactDOM.render(<div style={styles}> * Reminder: {obj.userName} wants to offer draw. </div>,document.getElementById('warning'));\n    });\n    socket.on('draw',function(user){\n    that.setState({\n      draw:user\n    });\n    });\n    socket.on('pull back',function(msg){\n      console.log(msg.userName + ' pull back');\n      const styleArray = that.state.styleArr.slice();\n        if(msg.userName!=real.value)\n        {\n         alert(msg.userName + ' pulled back.');\n        }\n        styleArray[msg.place]='unit';\n        that.setState({\n          'styleArr':styleArray,\n           isBlacksTurn: !msg.turn,\n           point:last_point\n        })\n    });\n  }\n\n  handle(n){\n      // CSS stones\n      let num=0;\n      for(let i in this.state.online){\n            num++;\n      }\n      if(num<2){\n        alert('Waiting for a partner.')\n        return\n      }\n\n      if(this.state.isBlacksTurn==this.state.urBlack){\n          if(this.state.styleArr[n]!='unit'){\n            alert('The place is occupied.');\n            return;\n        }\n        socket.emit('chat message',{'place':n,'player':this.state.isBlacksTurn})\n      }else{\n          alert('It is not your turn.');\n      }\n\n  }\n  quit(){\n     socket.emit('quit',{\"userName\":real.value,\"turn\":this.state.isBlacksTurn,\"status\":this.state.status})\n  }\n\n  pull(){\n    if(pull_no>0 && this.state.status==0){\n      socket.emit('pullback',{\"place\":this.state.point,\"turn\":this.state.isBlacksTurn,'userName':real.value});\n      pull_no--;\n      alert(pull_no + ' time(s) left.')\n    }\n    else {\n      if(this.state.status!=0){\n       alert('Cannot pull back.');\n      }\n      if(pull_no<=0){\n       alert('Ran out of times.');\n      }\n    }\n  }\n\n  give(){\n    socket.emit('giveup',{\"userName\":real.value})\n  }\n\n  draw(){\n    socket.emit('offerdraw',{\"userName\":real.value})\n  }\n\n  componentDidUpdate(){\n  // UI Update\n  var gamingUser = this.state.gaming;\n  var drawUser = this.state.draw;\n  var p1 = real.value;\n  var p1Rank = rank.value;\n  var p1Rep = credit.value;\n  var p1Quit = quit.value;\n  var p1Status,p1Win;\n  var p2,p2Rank,p2Rep,p2Quit,p2Status,p2Win;\n  var num=0;\n  var styles = {\n\t\tcolor:'red'\n\t};\n\n  for(let key in gamingUser){\n     if(gamingUser[key].userName!=p1)\n     {\n       p2 = gamingUser[key].userName;\n       p2Rank = gamingUser[key].rank;\n       p2Rep = gamingUser[key].credit;\n       p2Quit = gamingUser[key].quit;\n       p2Status = gamingUser[key].status;\n       p2Win = gamingUser[key].win;\n     }else {\n       p1Status = gamingUser[key].status;\n       p1Win = gamingUser[key].win;\n     }\n  }\n\n  for(let key in drawUser){\n    num++;\n  }\n\n\tif(this.state.status ==0 && num>1){\n\t\talert('Offer Draw. No winner.');\n\t\tp1Status = p2Status = 0;\n\t\tp1Win = 'offer draw'; p2Win = 'offer draw';\n\t\tlet styles = {\n\t\tcolor:'red'\n\t    };\n\t\tReactDOM.render(<div style={styles}>* Two players offered draw together. No winner.</div>,document.getElementById('warning'));\n\t\tReactDOM.render(<img src='img/draw.png' className='victory'/>,document.getElementById('gameover'));\n\t\tReactDOM.render(\n\t\t<form action='/result' method='post' onSubmit={this.submit}>\n\t\t <table>\n\t\t  <tbody>\n\t\t  <tr>\n\t\t   <td><input type='text' id='p1' name='p1' defaultValue={p1} /></td>\n\t\t   <td><input type='text' id='p1Rank' name='p1Rank' defaultValue={p1Rank} /></td>\n\t\t   <td><input type='text' id='p1Rep' name='p1Rep' defaultValue={p1Rep} /></td>\n       <td><input type='text' id='p1Quit' name='p1Quit' defaultValue={p1Quit} /></td>\n\t\t   <td><input type='text' id='p1Status' name='p1Status' defaultValue={p1Status} /></td>\n\t\t   <td><input type='text' id='p1Win' name='p1Win' defaultValue={p1Win} /></td>\n\t\t  </tr>\n\t\t  <tr>\n\t\t   <td><input type='text' id='p2' name='p2' defaultValue={p2} /></td>\n\t\t   <td><input type='text' id='p2Rank' name='p2Rank' defaultValue={p2Rank} /></td>\n\t\t   <td><input type='text' id='p2Rep' name='p2Rep' defaultValue={p2Rep} /></td>\n       <td><input type='text' id='p2Quit' name='p2Quit' defaultValue={p2Quit} /></td>\n\t\t   <td><input type='text' id='p2Status' name='p2Status' defaultValue={p2Status} /></td>\n\t\t   <td><input type='text' id='p2Win' name='p2Win' defaultValue={p2Win} /></td>\n\t\t  </tr>\n\t\t  <tr>\n\t\t   <td><input type='submit' value='Submit Result' /></td>\n\t\t  </tr>\n\t\t  </tbody>\n\t\t</table>\n\t\t</form>,\n\t\tdocument.getElementById('result'));\n\t   }\n\n  if(p1==this.state.quit){\n    p1Status = -1; p2Status = 0;\n    p1Win = 'quit'; p2Win = 'forced left';\n    ReactDOM.render(<img src='img/defeat.png' className='victory'/>,document.getElementById('gameover'));\n    ReactDOM.render(\n    <form action='/result' method='post' onSubmit={this.submit}>\n     <table>\n      <tbody>\n      <tr>\n       <td><input type='text' id='p1' name='p1' defaultValue={p1} /></td>\n       <td><input type='text' id='p1Rank' name='p1Rank' defaultValue={p1Rank} /></td>\n       <td><input type='text' id='p1Rep' name='p1Rep' defaultValue={p1Rep} /></td>\n       <td><input type='text' id='p1Quit' name='p1Quit' defaultValue={p1Quit} /></td>\n       <td><input type='text' id='p1Status' name='p1Status' defaultValue={p1Status} /></td>\n       <td><input type='text' id='p1Win' name='p1Win' defaultValue={p1Win} /></td>\n      </tr>\n      <tr>\n       <td><input type='text' id='p2' name='p2' defaultValue={p2} /></td>\n       <td><input type='text' id='p2Rank' name='p2Rank' defaultValue={p2Rank} /></td>\n       <td><input type='text' id='p2Rep' name='p2Rep' defaultValue={p2Rep} /></td>\n       <td><input type='text' id='p2Quit' name='p2Quit' defaultValue={p2Quit} /></td>\n       <td><input type='text' id='p2Status' name='p2Status' defaultValue={p2Status} /></td>\n       <td><input type='text' id='p2Win' name='p2Win' defaultValue={p2Win} /></td>\n      </tr>\n      <tr>\n       <td><input type='submit' value='Submit Result' /></td>\n      </tr>\n      </tbody>\n    </table>\n    </form>,\n    document.getElementById('result'));\n  }else{\n    if(p1!=this.state.quit && this.state.quit!=null)\n    {\n      p1Status = 0; p2Status = -1;\n      p1Win = 'forced left'; p2Win = 'quit';\n      ReactDOM.render(<img src='img/victory.png' className='victory'/>,document.getElementById('gameover'));\n      ReactDOM.render(\n      <form action='/result' method='post' onSubmit={this.submit}>\n       <table>\n        <tbody>\n        <tr>\n         <td><input type='text' id='p1' name='p1' defaultValue={p1} /></td>\n         <td><input type='text' id='p1Rank' name='p1Rank' defaultValue={p1Rank} /></td>\n         <td><input type='text' id='p1Rep' name='p1Rep' defaultValue={p1Rep} /></td>\n         <td><input type='text' id='p1Quit' name='p1Quit' defaultValue={p1Quit} /></td>\n         <td><input type='text' id='p1Status' name='p1Status' defaultValue={p1Status} /></td>\n         <td><input type='text' id='p1Win' name='p1Win' defaultValue={p1Win} /></td>\n        </tr>\n        <tr>\n         <td><input type='text' id='p2' name='p2' defaultValue={p2} /></td>\n         <td><input type='text' id='p2Rank' name='p2Rank' defaultValue={p2Rank} /></td>\n         <td><input type='text' id='p2Rep' name='p2Rep' defaultValue={p2Rep} /></td>\n         <td><input type='text' id='p2Quit' name='p2Quit' defaultValue={p2Quit} /></td>\n         <td><input type='text' id='p2Status' name='p2Status' defaultValue={p2Status} /></td>\n         <td><input type='text' id='p2Win' name='p2Win' defaultValue={p2Win} /></td>\n        </tr>\n        <tr>\n         <td><input type='submit' value='Submit Result' /></td>\n        </tr>\n        </tbody>\n      </table>\n      </form>,\n      document.getElementById('result'));\n    }\n  }\n\n\n\n  if(this.state.status==-1 || this.state.status==0){\n       if(calculateWinner(this.state.styleArr,this.state.point)){\n            if(this.state.isBlacksTurn!=this.state.urBlack&&this.state.urBlack!=null){\n              ReactDOM.render(<img src='img/victory.png' className='victory'/>,document.getElementById('gameover'));\n               socket.emit('victory',{userName:real.value});\n               p1Status = p2Status = 1;\n               p1Win = 'victory'; p2Win = 'defeat';\n               ReactDOM.render(\n               <form action='/result' method='post' onSubmit={this.submit}>\n                <table>\n                 <tbody>\n                 <tr>\n                  <td><input type='text' id='p1' name='p1' defaultValue={p1} /></td>\n                  <td><input type='text' id='p1Rank' name='p1Rank' defaultValue={p1Rank} /></td>\n                  <td><input type='text' id='p1Rep' name='p1Rep' defaultValue={p1Rep} /></td>\n                  <td><input type='text' id='p1Quit' name='p1Quit' defaultValue={p1Quit} /></td>\n                  <td><input type='text' id='p1Status' name='p1Status' defaultValue={p1Status} /></td>\n                  <td><input type='text' id='p1Win' name='p1Win' defaultValue={p1Win} /></td>\n                 </tr>\n                 <tr>\n                  <td><input type='text' id='p2' name='p2' defaultValue={p2} /></td>\n                  <td><input type='text' id='p2Rank' name='p2Rank' defaultValue={p2Rank} /></td>\n                  <td><input type='text' id='p2Rep' name='p2Rep' defaultValue={p2Rep} /></td>\n                  <td><input type='text' id='p2Quit' name='p2Quit' defaultValue={p2Quit} /></td>\n                  <td><input type='text' id='p2Status' name='p2Status' defaultValue={p2Status} /></td>\n                  <td><input type='text' id='p2Win' name='p2Win' defaultValue={p2Win} /></td>\n                 </tr>\n                 <tr>\n                  <td><input type='submit' value='Submit Result' /></td>\n                 </tr>\n                 </tbody>\n               </table>\n               </form>,\n               document.getElementById('result'));\n            }else{\n              ReactDOM.render(<img src='img/defeat.png' className='victory'/>,document.getElementById('gameover'));\n              socket.emit('defeat',{userName:real.value});\n              p1Status = p2Status = 1;\n              p1Win = 'defeat'; p2Win = 'victory';\n              ReactDOM.render(\n              <form action='/result' method='post' onSubmit={this.submit}>\n               <table>\n                <tbody>\n                <tr>\n                 <td><input type='text' id='p1' name='p1' defaultValue={p1} /></td>\n                 <td><input type='text' id='p1Rank' name='p1Rank' defaultValue={p1Rank} /></td>\n                 <td><input type='text' id='p1Rep' name='p1Rep' defaultValue={p1Rep} /></td>\n                 <td><input type='text' id='p1Quit' name='p1Quit' defaultValue={p1Quit} /></td>\n                 <td><input type='text' id='p1Status' name='p1Status' defaultValue={p1Status} /></td>\n                 <td><input type='text' id='p1Win' name='p1Win' defaultValue={p1Win} /></td>\n                </tr>\n                <tr>\n                 <td><input type='text' id='p2' name='p2' defaultValue={p2} /></td>\n                 <td><input type='text' id='p2Rank' name='p2Rank' defaultValue={p2Rank} /></td>\n                 <td><input type='text' id='p2Rep' name='p2Rep' defaultValue={p2Rep} /></td>\n                 <td><input type='text' id='p2Quit' name='p2Quit' defaultValue={p2Quit} /></td>\n                 <td><input type='text' id='p2Status' name='p2Status' defaultValue={p2Status} /></td>\n                 <td><input type='text' id='p2Win' name='p2Win' defaultValue={p2Win} /></td>\n                </tr>\n                <tr>\n                 <td><input type='submit' value='Submit Result' /></td>\n                </tr>\n                </tbody>\n              </table>\n              </form>,\n              document.getElementById('result'));\n            }\n      }\n  }else {\n    if (this.state.status==1 && p1==this.state.giveup) {\n      ReactDOM.render(<img src='img/defeat.png' className='victory'/>,document.getElementById('gameover'));\n      alert('You lost.')\n      p1Status = p2Status = 1;\n      p1Win = 'defeat'; p2Win = 'victory';\n      ReactDOM.render(\n      <form action='/result' method='post' onSubmit={this.submit}>\n       <table>\n        <tbody>\n        <tr>\n         <td><input type='text' id='p1' name='p1' defaultValue={p1} /></td>\n         <td><input type='text' id='p1Rank' name='p1Rank' defaultValue={p1Rank} /></td>\n         <td><input type='text' id='p1Rep' name='p1Rep' defaultValue={p1Rep} /></td>\n         <td><input type='text' id='p1Quit' name='p1Quit' defaultValue={p1Quit} /></td>\n         <td><input type='text' id='p1Status' name='p1Status' defaultValue={p1Status} /></td>\n         <td><input type='text' id='p1Win' name='p1Win' defaultValue={p1Win} /></td>\n        </tr>\n        <tr>\n         <td><input type='text' id='p2' name='p2' defaultValue={p2} /></td>\n         <td><input type='text' id='p2Rank' name='p2Rank' defaultValue={p2Rank} /></td>\n         <td><input type='text' id='p2Rep' name='p2Rep' defaultValue={p2Rep} /></td>\n         <td><input type='text' id='p2Quit' name='p2Quit' defaultValue={p2Quit} /></td>\n         <td><input type='text' id='p2Status' name='p2Status' defaultValue={p2Status} /></td>\n         <td><input type='text' id='p2Win' name='p2Win' defaultValue={p2Win} /></td>\n        </tr>\n        <tr>\n         <td><input type='submit' value='Submit Result' /></td>\n        </tr>\n        </tbody>\n      </table>\n      </form>,\n      document.getElementById('result'));\n    }else {\n      if (this.state.status==1 && p1!=this.state.giveup && this.state.giveup!=null) {\n        ReactDOM.render(<img src='img/victory.png' className='victory'/>,document.getElementById('gameover'));\n        alert(this.state.giveup + ' gave up the game.');\n         p1Status = p2Status = 1;\n         p1Win = 'victory'; p2Win = 'defeat';\n         ReactDOM.render(\n         <form action='/result' method='post' onSubmit={this.submit}>\n          <table>\n           <tbody>\n           <tr>\n            <td><input type='text' id='p1' name='p1' defaultValue={p1} /></td>\n            <td><input type='text' id='p1Rank' name='p1Rank' defaultValue={p1Rank} /></td>\n            <td><input type='text' id='p1Rep' name='p1Rep' defaultValue={p1Rep} /></td>\n            <td><input type='text' id='p1Quit' name='p1Quit' defaultValue={p1Quit} /></td>\n            <td><input type='text' id='p1Status' name='p1Status' defaultValue={p1Status} /></td>\n            <td><input type='text' id='p1Win' name='p1Win' defaultValue={p1Win} /></td>\n           </tr>\n           <tr>\n            <td><input type='text' id='p2' name='p2' defaultValue={p2} /></td>\n            <td><input type='text' id='p2Rank' name='p2Rank' defaultValue={p2Rank} /></td>\n            <td><input type='text' id='p2Rep' name='p2Rep' defaultValue={p2Rep} /></td>\n            <td><input type='text' id='p2Quit' name='p2Quit' defaultValue={p2Quit} /></td>\n            <td><input type='text' id='p2Status' name='p2Status' defaultValue={p2Status} /></td>\n            <td><input type='text' id='p2Win' name='p2Win' defaultValue={p2Win} /></td>\n           </tr>\n           <tr>\n            <td><input type='submit' value='Submit Result' /></td>\n           </tr>\n           </tbody>\n         </table>\n         </form>,\n         document.getElementById('result'));\n      }\n\n    }\n   }\n  }\n\n  submit(e){\n    console.log('Submit Result');\n    const path='/result';\n    browserHistory.push(path);\n    e.preventDefault();\n  }\n\n  render(){\n\n      let board=[];\n      for(let r=0;r<15;r++){\n        for(let i=0;i<15;i++){\n          board[r*15+i]=<Unit key={[r,i]} style={this.state.styleArr[r*15+i]} onClick={() => this.handle(r*15+i)}/>\n        }\n      }\n      return(\n        <div>\n          <OnlinePlayer online={this.state.online} />\n\t\t  <div id='warning'></div>\n          {board}\n          <Turn turn={this.state.isBlacksTurn}/>\n          <Quit onClick={() => this.quit()} />\n          <Pull onClick={() => this.pull()} />\n          <Give onClick={() => this.give()} />\n          <Draw onClick={() => this.draw()} />\n          <div id='gameover'></div>\n          <div id='result'></div>\n      </div>\n      )\n    }\n}\n\nfunction calculateWinner(arr,num) {\n    var target=arr[num];\n    var line=1;\n    var upSide,leftUp,rightUp;\n    upSide=leftUp=rightUp=Math.min(Math.floor(num/15),5);\n    // Horizontally\n    var leftSide=Math.min(num%15,5);\n    var rightSide=Math.min(14-num%15,5);\n    //console.log('rightSide',rightSide)\n    for(let i=num-1;i>num-leftSide-1;i--){\n        if(arr[i]==target){\n            line++;\n        }else{\n           break;\n        }\n    }\n    for(let i=num+1;i<=num+rightSide;i++){\n        if(arr[i]==target){\n            line++;\n        }else{\n            break;\n        }\n    }\n    if(line==5){\n        return true;\n    }else{\n        line=1;\n    }\n    //  Vertically\n    for(let i=num-15;i>=num-upSide*15;i=i-15){\n        if(arr[i]==target){\n            line++;\n        }else{\n            break;\n        }\n    }\n    var downSide=15-upSide\n    for(let i=num+15;i<=num+downSide*15;i=i+15){\n        if(arr[i]==target){\n            line++;\n        }else{\n            break;\n        }\n    }\n    if(line==5){\n       return true;\n    }else{\n        line=1;\n    }\n    //   Diagonally : /\n\n    rightUp=Math.min(rightUp,rightSide)\n    for(let i=num-14;i>=num-rightUp*14;i=i-14){\n        if(arr[i]==target){\n            line++;\n        }else{\n            break;\n        }\n    }\n    var leftDown,rightDown;\n    rightDown=leftDown=14-Math.floor(num/15);\n    leftDown=Math.min(leftDown,leftSide);\n    for(let i=num+14;i<=num+leftDown*14;i=i+14){\n        if(arr[i]==target){\n            line++;\n        }else{\n            break;\n        }\n    }\n    if(line==5){\n       return true;\n    }else{\n        line=1;\n    }\n    //   Diagonally :  \\\n    rightUp=Math.min(rightUp,leftSide)\n    for(let i=num-16;i>=num-rightUp*16;i=i-16){\n        if(arr[i]==target){\n            line++;\n        }else{\n            break;\n        }\n    }\n    rightDown=Math.min(rightDown,rightSide)\n    for(let i=num+16;i<=num+rightDown*16;i=i+16){\n        if(arr[i]==target){\n            line++;\n        }else{\n            break;\n        }\n    }\n    if(line==5){\n       return true;\n    }else{\n        line=1;\n    }\n\n    return false;\n}\n"]}